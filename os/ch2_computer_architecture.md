### 폰 노이만 구조
- CPU, 메모리, 입출력 장치, 저장 장치가 버스로 연결되는 구조를 말함
- 메모리를 이용하여 프로그래밍이 가능한 컴퓨터 구조
- 모든 프로그램은 메모리에 올라와야 실행할 수 있다.
- 명령어를 읽어오고 데이터를 변경하는 작업이 순차적으로 진행, 동시에 발생할 수 없음. 이를 폰 노이만 병목 현상이라고 한다.

### CPU 구성
- ALU: 덧셈, 뺄셈, 곱셈, 나눗셈과 간은 산술 연산과 AND, OR과 같은 논리 연산을 수행
- Control Unit: CPU 작업을 지시
- Register: 작업에 필요한 데이터를 CPU 내에서 임시로 보관하는 곳

### CPU 명령어 처리 과정
- 1. 프로그래밍 언어로 코드 작성
- 2. 어셈블리어로 변환
- 3. 메모리의 데이터를 임시로 레지스터에 올려놓음. 이 명령을 Control Unit이 내려줌
- 4. 레지스터에 올라온 메모리를 읽어와 ALU가 연산을 진행. 이 명령도 Control Unit이 내려줌
- 5. 연산의 결과를 다시 메모리에 올려놓고 종료

### 레지스터의 종류
- 사용자 가시 레지스터
  - 사용자 프로그램에 의해서 변경되는 레지스터
  - 데이터 레지스터: 메모리에서 가져온 데이터를 임시로 보관할 때 사용. CPU에 있는 대부분의 레지스터가 데이터 레지스터로 범용 레지스터라고도 부른다.
  - 주소 레지스터: 데이터 또는 명령어가 저장된 메모리 주소를 주소 레지스터라 부른다.
- 특수 레지스터, 사용자 불가시 레지스터
  - 프로그램 카운터(PC): CPU가 다음에 어떤 명령을 처리해야할 지 알아야 하므로 다음에 실행할 명령어의 주소를 기억하고 있다가 제어 장치에 알려주는 역할을 수행. 명령어 포인터라고도 한다.
  - 명령어 레지스터(IR): 현재 실행 중인 명령어를 저장
  - 메모리 주소 레지스터(MAR): 메모리에서 데이터를 가져오거나 보낼 때 주소를 지정하기 위해 사용
  - 메모리 버퍼 레지스터(MBR): 메모리에서 가져온 데이터나 메모리로 옮겨 갈 데이터를 임시로 저장
- 이 외에도 CPU가 사용하는 레지스터는 매우 많음

### Control Unit 동작 방식
- 1. Program Counter에서 다음에 수행할 명령어 주소 읽어옴
- 2. IR에 해당 명령어를 올려놓음
- 3. 메모리에 올라와 있는 값의 주소를 메모리 주소 레지스터에 저장
- 4. 메모리 버퍼 레지스터를 이용해서 메모리의 값을 데이터 레지스터 상에 올려놓음
- 5. Control Unit이 ALU에게 연산 명령을 내림

### 버스의 종류
- 버스: CPU와 메모리, 주변 장치 간에 데이터를 주고 받을 때 사용
- 제어 버스
  - 다음에 어떤 박을 할지 지시하는 제어 신호가 오고 간다.
  - CPU의 Control Unit과 연결되어 있다.
  - 메모리에서 오류가 발생하거나 네트워크 카드에 데이터가 모두 도착했다는 신호는 모두 제어 버스를 통해 CPU로 전달된다.
- 주소 버스
  - 데이터를 읽거나 쓸 때 어느 위치에서 작업할 것인지를 알려주는 위치 정보가 오고 간다.
- 데이터 버스
  - 메모리 버퍼 레지스터와 연결되어 있으며 양방향으로 데이터를 주고 받는다.

### 부팅
- OS도 역시 소프트웨어이기 때문에 메모리에 올려서 사용한다.
- 컴퓨터 전원을 켜면 롬에 저장된 바이오스가 실행됨
- 바이오스는 CPU, 메모리, 하드디스크, 키보드 등 하드웨어가 제대로 작동하는지 확인
- 이상 없으면 마스터 부트 레코드 프로그램을 실행, 이는 하드디스크에 저장된 운영체제를 메모리로 불러옴.

### 캐시
- 메모리와 CPU 간의 속도 차이를 완화하기 위해 메모리의 데이터를 미리 가져와 저장해두는 임시 장소
- 캐시는 CPU 내부에 위치, CPU 내부 버스의 속도로 작동
- CPU는 메모리 접근 시에 먼저 캐시를 방문, 원하는 데이터가 있는지 조회
- cache locality란 현지 실행되고 있는 행 근처의 행이 실행될 확률이 높다는 이론. 따라서 그 근처 행들을 미리 메모리에서 읽어와 캐시에 올려놓는다.
- CPU 레지스터와 직접 연결되는 캐시는 L1 캐시, 메모리에 연결되는 캐시는 L2 캐시라 부른다.

### 인터럽트
- 컴퓨터는 많은 주변 장치가 있어서 CPU가 모든 입출력에 관여하면 작업 효율이 현저하게 떨어짐
- 인터럽트 방식은 데이터 입출력이 이루어지는 동안 CPU가 다른 작업을 할 수 있음
- 입출력 관리자가 CPU에 보내는 완료 신호를 인터럽트라 한다.
- CPU는 다른 작업을 하다가 인터럽트를 수신하면 하던 일을 중단하고 인터럽트 결과로 옮겨진 데이터를 처리한다.
  - 1. CPU가 입출력 관리자에게 입출력 명령을 보냄
  - 2. 입출력 관리자는 명령받은 데이터를 메모리에 가져다 놓거나, 메모리에 있는 데이터를 저장 장치로 옮김.
  - 3. 데이터 전송이 완료되면 입출력 관리자는 완료 신호를 CPU에 보낸다.
  - 4. CPU가 하던 일을 멈추고 IO 처리 작업의 결과를 처리한다.

### 직접 메모리 접근 (Direct Memory Access)
- 메모리는 CPU만 접근 권한을 가진 작업 공간이라 입출력 관리자는 접근이 불가
- 따라서 접근 권한이 필요한데 이러한 권한을 직접 메모리 접근이라 한다.

